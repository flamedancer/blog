---
layout: post 
title: 行为型 
categories: [design-pattern]
---
### 责任链  ###
免请求发送者与接收者耦合在一起，让多个对象都有可能接收请求，将这些对象连接成一条链，并且沿着这条链传递请求，直到有对象处理它为止。

我的理解:
1. 父类有四个要点：阈值，基于阈值的条件判断方法，基于条件判断的结果的处理方法(判断失败继续调用next_point的本方法)，next_point
2. 子类只需设置 自己的 阈值 和 处理方法
3. 客户设置好 链表，调用表头 处理方法   
4. eg:


``` python
class Parent:
    def __init__(self, value):
        self.next_point = None
        self.value = value 
    def can_handle(self, num):
        return num >= value 
    def handler(self, num):
        pass
    def do_handler(self, num):
        if self.can_handle(num):
            self.handler(num)
        elif self.next_point:
            self.next_point.do_handler(num)


class Child1(Parent):
    def handler(self, num)
        print("Im  childer1, my value is {}, this num is".format(self.value, num))
            

class Child2(Parent):
    def handler(self, num)
        print("My name is  childer2, my value is {}, this num is".format(self.value, num))


if __name__ == '__main__':
    c1 = Child1(1)
    c2 = Child2(3)
    c1.next_point = c2
    c1.do_handler(2)
    
    
```


### 命令模式 ###
在软件系统中，“行为请求者”与“行为实现者”通常呈现一种“紧耦合”。但在某些场合，比如要对行为进行“记录、撤销/重做、事务”等处理，这种无法抵御变化的紧耦合是不合适的。在这种情况下，如何将“行为请求者”与“行为实现者”解耦？将一组行为抽象为对象，实现二者之间的松耦合。这就是命令模式（Command Pattern）


我的理解：
1. 有一个命令收集者，可以add命令；可以start开始执行命令。另外在执行命令前，其实可以增删改查命令列表
2. 一系列的命令类,每个命令类都有入口方法，即怎么执行该命令的方法
3. 具体的业务过程不一定在命令类里，可能是另外的业务类，命令类只是调用业务类的方法


``` python
class Invoker:
    def __init__(self):
        self.cmds = []

    def add_cmd(self, cmd):
        self.cmds.append(cmd)

    def run(self): 
        for cmd in self.cmds:
            cmd.execute()


class Cmd1:
    def execute(self):
        print("Do cmd1")
        Business1().do_someting()


class Cmd2:
    def execute(self):
        print("Do cmd1")
        Business2().do_someting()


class Business1:
    def do_someting(self):
        print("business1 is workong")


class Business2:
    def do_someting(self):
        print("businee2 is working")


if __name__ == '__main__':
    invoker = Invoker()
    invoker.add_cmd(Cmd1())
    invoker.add_cmd(Cmd2())
    invoker.run()
```




